(M=>{const[u,l,r,F,H,R,m,T,D]=M.g;delete M.g;const P=Symbol(),w=Symbol(),k=Symbol(),x=Symbol(),B=Symbol(),W=Symbol(),U=[],f=(c,d,v)=>c[d]=A(d,v),A=(c,d)=>Object.defineProperty(d,"name",{value:c}),V=(c,d)=>{const v={getContext:{value(i,S){return this[P]||(this[P]=(i.includes("webgl")?C:E)(this,i,S)),this[P]}}},n=f(d,"CanvasGradient",class extends c{addColorStop(...i){r(this,["addColorStop"],i,2)}}),b=f(d,"CanvasPattern",class extends c{setTransform(...i){r(this,["setTransform"],i,2)}}),E=(i,S,a)=>{const y=i[m],L=R(),p={[m]:y,[T]:L,[D]:[]},e=r(i,["getContext"],[S,a],1,L),t="getContextAttributes,getImageData,getLineDash,getTransform,isPointInPath,isPointInStroke,measureText".split(","),g={get:(o,s)=>typeof s=="string"&&s in e?typeof e[s]=="function"?(...h)=>{if(s.startsWith("create")){const $=R();return r(p,[s],h,2,$),s==="createImageData"||s==="createPattern"?(G=`${s}()`,console.warn(`${G} not implemented`),{setTransform:()=>{}}):new n(y,$)}var G;const q=t.includes(s)?1:2;return r(p,[s],h,q)}:e[s]:o[s],set:(o,s,h)=>(typeof s=="string"&&s in e?(e[s]!==h&&typeof h!="function"&&l(p,[s],h),e[s]=h):o[s]=h,!0)};return new Proxy(e,g)},C=(i,S,a)=>{const y=i[m],L=R(),p={[m]:y,[T]:L,[D]:[]},e=r(i,["getContext"],[S,a],1,L),t={get:(g,o)=>typeof o=="string"?typeof e[o]!="function"?e[o]:(...s)=>r(p,[o],s,j(o)):g[o],set:(g,o,s)=>(typeof o=="string"&&o in e?(e[o]!==s&&typeof s!="function"&&l(p,[o],s),e[o]=s):g[o]=s,!0)};return new Proxy(e,t)},O="checkFramebufferStatus,makeXRCompatible".split(","),j=i=>i.startsWith("create")||i.startsWith("get")||i.startsWith("is")||O.includes(i)?1:2;f(d,"CanvasGradient",n),f(d,"CanvasPattern",b),H(d.HTMLCanvasElement,v)},X=(c,d,v,n)=>{var b,E;n.Audio=A("HTMLAudioElement",class{constructor(e){const t=v.k("audio",R());return t.src=e,t}});const C=class extends c{get enabled(){return u(this,["enabled"])}set enabled(e){l(this,["enabled"],e)}get id(){return u(this,["id"])}get kind(){return u(this,["kind"])}get label(){return u(this,["label"])}get language(){return u(this,["language"])}get sourceBuffer(){return new i(this)}},O=class{constructor(e){const t="audioTracks",g=e[m],o=e[T];return new Proxy({addEventListener(...s){r(e,[t,"addEventListener"],s,3)},getTrackById:(...s)=>r(e,[t,"getTrackById"],s),get length(){return u(e,[t,"length"])},removeEventListener(...s){r(e,[t,"removeEventListener"],s,3)}},{get:(s,h)=>typeof h=="number"?new C(g,o,[t,h]):s[h]})}},j=f(n,"SourceBufferList",class extends Array{constructor(e){super(),this[w]=e}addEventListener(...e){r(this[w],["sourceBuffers","addEventListener"],e,3)}removeEventListener(...e){r(this[w],["sourceBuffers","removeEventListener"],e,3)}}),i=f(n,"SourceBuffer",(E=class extends d{constructor(e){super(e[m],e[T],["sourceBuffers"]),this[b]=[],this[w]=e}abort(){const e=a(this);r(this,[e,"appendWindowStart"],U,1)}addEventListener(...e){const t=a(this);r(this,[t,"addEventListener"],e,3)}appendBuffer(e){this[B].push(["appendBuffer",[e],e]),y(this)}get appendWindowStart(){const e=a(this);return u(this,[e,"appendWindowStart"])}set appendWindowStart(e){const t=a(this);l(this,[t,"appendWindowStart"],e)}get appendWindowEnd(){const e=a(this);return u(this,[e,"appendWindowEnd"])}set appendWindowEnd(e){const t=a(this);l(this,[t,"appendWindowEnd"],e)}get buffered(){const e=this[w],t=a(this);return new S(e[m],e[T],["sourceBuffers",t,"buffered"])}changeType(e){const t=a(this);r(this,[t,"changeType"],[e],2)}get mode(){const e=a(this);return u(this,[e,"mode"])}set mode(e){const t=a(this);l(this,[t,"mode"],e)}remove(e,t){this[B].push(["remove",[e,t]]),y(this)}removeEventListener(...e){const t=a(this);r(this,[t,"removeEventListener"],e,3)}get timestampOffset(){const e=a(this);return u(this,[e,"timestampOffset"])}set timestampOffset(e){const t=a(this);l(this,[t,"timestampOffset"],e)}get updating(){const e=a(this);return u(this,[e,"updating"])}},b=B,E)),S=f(n,"TimeRanges",class extends c{start(...e){return r(this,["start"],e)}end(...e){return r(this,["end"],e)}get length(){return u(this,["length"])}}),a=e=>e?e[w][x].indexOf(e):-1,y=e=>{if(e[B].length){if(!e.updating){const t=e[B].shift();if(t){const g=a(e);r(e,[g,t[0]],t[1],3,void 0,t[2])}}setTimeout(()=>y(e),50)}},L={buffered:{get(){return this[W]||(this[W]=new S(this[m],this[T],["buffered"]),setTimeout(()=>{this[W]=void 0},5e3)),this[W]}},readyState:{get(){return this[k]===4?4:(typeof this[k]!="number"&&(this[k]=u(this,["readyState"]),setTimeout(()=>{this[k]=void 0},1e3)),this[k])}}};f(n,"MediaSource",class extends d{constructor(){super(v.V),this[x]=new j(this),F(this,"MediaSource",U)}get activeSourceBuffers(){return[]}addSourceBuffer(e){const t=new i(this);return this[x].push(t),r(this,["addSourceBuffer"],[e]),t}clearLiveSeekableRange(){r(this,["clearLiveSeekableRange"],U,2)}get duration(){return u(this,["duration"])}set duration(e){l(this,["duration"],e)}endOfStream(e){r(this,["endOfStream"],[e],3)}get readyState(){return u(this,["readyState"])}removeSourceBuffer(e){const t=a(e);t>-1&&(this[x].splice(t,1),r(this,["removeSourceBuffer"],[t],1))}setLiveSeekableRange(e,t){r(this,["setLiveSeekableRange"],[e,t],2)}get sourceBuffers(){return this[x]}static isTypeSupported(e){if(!I.has(e)){const t=r(n,["MediaSource","isTypeSupported"],[e]);I.set(e,t)}return I.get(e)}});const p=n.URL=A("URL",class extends URL{});"audioTracks"in n.HTMLMediaElement.prototype&&(f(n,"AudioTrackList",O),f(n,"AudioTrack",C),L.audioTracks={get(){return new O(this)}}),H(n.HTMLMediaElement,L),p.createObjectURL=e=>r(n,["URL","createObjectURL"],[e]),p.revokeObjectURL=e=>r(n,["URL","revokeObjectURL"],[e])},I=new Map;M.f=(c,d,v,n,b)=>{b.map(E=>{delete n[E]}),V(c,n),X(c,d,v,n)}})(self);
