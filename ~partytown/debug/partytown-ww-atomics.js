(A=>{const w=Symbol(),G=Symbol(),C=Symbol(),Kt=Symbol(),Q=Symbol(),ht=Symbol(),gt=Symbol(),qt=Symbol(),Xt=new Map,st={},bt=new WeakMap,ft=[],$={},Jt=new Map,Yt=new Map,p={},j=new Map,Lt=new Map,_=t=>t.split(","),Zt=t=>{if(t=$.$libPath$+t,new URL(t).origin!=location.origin)throw"Invalid "+t;return t},Qt=_("clientWidth,clientHeight,clientTop,clientLeft,innerWidth,innerHeight,offsetWidth,offsetHeight,offsetTop,offsetLeft,outerWidth,outerHeight,pageXOffset,pageYOffset,scrollWidth,scrollHeight,scrollTop,scrollLeft"),zt=_("childElementCount,children,firstElementChild,lastElementChild,nextElementSibling,previousElementSibling"),Me=_("insertBefore,remove,removeChild,replaceChild"),Ee=_("className,width,height,hidden,innerHTML,innerText,textContent"),Vt=_("setAttribute,setAttributeNS,setProperty"),Nt=_("addEventListener,dispatchEvent,removeEventListener"),Te=Nt.concat(Vt,_("add,observe,remove,unobserve")),Ce=/^[A-Z_]([A-Z0-9-]*[A-Z0-9])?$/,rt=()=>{},V=t=>t.length,lt=t=>{var e,r,n;try{const s=(e=t?.constructor)===null||e===void 0?void 0:e.name;if(s)return s}catch{}try{const s=(n=(r=t?.__zone_symbol__originalInstance)===null||r===void 0?void 0:r.constructor)===null||n===void 0?void 0:n.name;if(s)return s}catch{}return""},vt=[],J=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),Ie="text/partytown",Dt=(t,e,r)=>Object.defineProperty(t,e,{...r,configurable:!0}),X=(t,e)=>Dt(t,"name",{value:e}),ot=(t,e,r)=>Dt(t.prototype,e,r),U=(t,e)=>Object.defineProperties(t.prototype,e),Rt=(t,e,r)=>ot(t,e,{value:r,writable:!0}),At=(t,e)=>e in t[ht],x=(t,e)=>t[ht][e],v=(t,e,r)=>t[ht][e]=r,xe=(t,e)=>((e=bt.get(t))||(bt.set(t,e=J()),st[e]=t),e),Y=(t,e,r,n,s)=>(s=Xt.get(e),!s&&r&&p[t]&&(s=p[t].$createNode$(r,e,n),Xt.set(e,s)),s),_t=(t,e)=>Rt(t,"nodeType",e),Ht=(t,e)=>e.map(r=>ot(t,r,{get(){let n=pt(this,r),s=Lt.get(n);return s||(s=D(this,[r]),Lt.set(n,s)),s}})),pt=(t,e,r)=>[t[w],t[G],e,...(r||vt).map(n=>String(n&&n[w]?n[G]:n))].join("."),mt=(t,e)=>_(e).map(r=>ot(t,r,{get(){return At(this,r)||v(this,r,D(this,[r])),x(this,r)},set(n){x(this,r)!==n&&b(this,[r],n),v(this,r,n)}})),te=t=>Qt.map(e=>ot(t,e,{get(){const r=j.get(pt(this,e));if(typeof r=="number")return r;const n=D(this,[e],Qt);return n&&typeof n=="object"?(Object.entries(n).map(([s,o])=>j.set(pt(this,s),o)),n[e]):n}})),ee=(t,e)=>e.map(r=>{t.prototype[r]=function(...n){let s=pt(this,r,n),o=j.get(s);return o||(o=y(this,[r],n),j.set(s,o)),o}}),Ot=(t,e,r,n,s)=>r!==void 0&&(s=typeof r)?s==="string"||s==="boolean"||s==="number"||r==null?[0,r]:s==="function"?[4,{$winId$:t,$instanceId$:e,$refId$:xe(r)}]:(n=n||new Set)&&Array.isArray(r)?n.has(r)?[1,[]]:n.add(r)&&[1,r.map(o=>Ot(t,e,o,n))]:s==="object"?r[G]?[3,[r[w],r[G]]]:r instanceof Event?[5,ne(t,e,r,!1,n)]:be&&r instanceof TrustedHTML?[0,r.toString()]:r instanceof ArrayBuffer?[8,r]:ArrayBuffer.isView(r)?[9,r.buffer,lt(r)]:[2,ne(t,e,r,!0,n)]:void 0:r,be=typeof TrustedHTML<"u",ne=(t,e,r,n,s,o,l,i)=>{if(o={},!s.has(r)){s.add(r);for(l in r)i=r[l],(n||typeof i!="function")&&(o[l]=Ot(t,e,i,s))}return o},Wt=(t,e)=>t?Ot(t[w],t[G],e):[0,e],it=(t,e,r,n,s,o,l,i)=>{if(n){if(s=n[0],o=n[1],s===0||s===11||s===12)return o;if(s===4)return Le(r,o);if(s===6)return t&&r.length>0?(...a)=>y(p[t].$window$,r,a,1):rt;if(s===3)return se(o);if(s===7)return new re(o.map(se));if(s===10)return new De(o);if(s===1)return o.map(a=>it(t,e,r,a));if(s===14)return new ve(o);l={};for(i in o)l[i]=it(t,e,[...r,i],o[i]);if(s===13)return new p[t].$window$.CSSStyleDeclaration(t,e,r,l);if(s===5){if(l.type==="message"&&l.origin){let a=JSON.stringify(l.data),u=ft.find(g=>g.$data$===a),h;u&&(h=p[u.$winId$],h&&(l.source=h.$window$,l.origin=h.$location$.origin))}return new Proxy(new Event(l.type,l),{get:(a,u)=>u in l?l[u]:typeof a[String(u)]=="function"?rt:a[String(u)]})}if(s===2)return l}},se=([t,e,r])=>e===t&&p[t]?p[t].$window$:Y(t,e,r),Le=(t,{$winId$:e,$instanceId$:r,$nodeName$:n,$refId$:s})=>(st[s]||bt.set(st[s]=function(...o){const l=Y(e,r,n);return y(l,t,o)},s),st[s]);class ve extends Error{constructor(e){super(e.message),this.name=e.name,this.message=e.message,this.stack=e.stack}}class re{constructor(e){(this._=e).map((r,n)=>this[n]=r)}entries(){return this._.entries()}forEach(e,r){this._.map(e,r)}item(e){return this[e]}keys(){return this._.keys()}get length(){return V(this._)}values(){return this._.values()}[Symbol.iterator](){return this._[Symbol.iterator]()}}const De=class{constructor(t){this.name=t[0],this.value=t[1]}get nodeName(){return this.name}get nodeType(){return 2}},at=(t,e,r)=>console.warn(`Partytown unable to ${t} cross-origin ${e}: `+r.$location$),I=(t,e)=>{try{if($.$config$.logStackTraces){const o=new Error().stack.split(`
`),l=o.findIndex(i=>i.includes("logWorker"));t+=`
`+o.slice(l+1).join(`
`)}let n,s;e?(n=`Worker (${ut(e)}) \u{1F389}`,s=Re(e)):(n=A.name,s="#9844bf"),$.lastLog!==t&&($.lastLog=t,console.debug.apply(console,[`%c${n}`,`background: ${s}; color: white; padding: 2px 3px; border-radius: 2px; font-size: 0.8em;`,t]))}catch{}},kt=[],ut=t=>(kt.includes(t)||kt.push(t),kt.indexOf(t)+1),Re=t=>{const e=["#00309e","#ea3655","#eea727"],r=ut(t)-1;return e[r]||e[e.length-1]},yt=(t,e)=>{let r="";if(t){const n=lt(t);if(n==="Window")r="";else if(typeof t[C]=="string"){let s=t[C];r=s==="#text"?"textNode.":s==="#comment"?"commentNode.":s==="#document"?"document.":s==="html"?"doctype.":s.toLowerCase()+"."}else r="nodeType"in t&&t.nodeType===2?"attributes.":n==="CanvasRenderingContext2D"?"context2D.":n==="CanvasRenderingContextWebGL"?"contextWebGL.":n==="CSSStyleDeclaration"?"style.":n==="MutationObserver"?"mutationObserver.":n==="NamedNodeMap"?"namedNodeMap.":n==="ResizeObserver"?"resizeObserver.":n.substring(0,1).toLowerCase()+n.substring(1)+".";t[Q]&&t[Q].length&&(r+=[...t[Q]].join(".")+".")}if(e.length>1){const n=e.slice(0,e.length-1),s=e[e.length-1];if(!isNaN(s))return r+`${n.join(".")}[${s}]`}return r+e.join(".")},N=(t,e)=>{const r=typeof e;if(e===void 0)return"undefined";if(r==="boolean"||r==="number"||e==null)return JSON.stringify(e);if(r==="string")return t.includes("cookie")?JSON.stringify(e.slice(0,10)+"..."):JSON.stringify(e.length>50?e.slice(0,40)+"...":e);if(Array.isArray(e))return`[${e.map(N).join(", ")}]`;if(r==="object"){const n=e[G],s=lt(e);if(typeof n=="string"){if(s==="Window")return"window";if(typeof e[C]=="string"){if(e.nodeType===1)return`<${e[C].toLowerCase()}>`;if(e.nodeType===10)return`<!DOCTYPE ${e[C]}>`;if(e.nodeType<=11)return e[C]}return"\xAF\\_(\u30C4)_/\xAF instance obj"}return e[Symbol.iterator]?`[${Array.from(e).map(o=>N(t,o)).join(", ")}]`:"value"in e?typeof e.value=="string"?`"${e.value}"`:oe(e.value):oe(e)}return(n=>typeof n=="object"&&n&&n.then)(e)?"Promise":r==="function"?`\u0192() ${e.name||""}`.trim():`\xAF\\_(\u30C4)_/\xAF ${String(e)}`.trim()},oe=t=>{const e=[];for(let n in t){const s=t[n],o=typeof s;o==="string"?e.push(`${n}: "${s}"`):o==="function"?e.push(`${n}: \u0192`):Array.isArray(o)?e.push(`${n}: [..]`):o==="object"&&s?e.push(`${n}: {..}`):e.push(`${n}: ${String(s)}`)}let r=e.join(", ");return r.length>200&&(r=r.substring(0,200)+".."),`{ ${r} }`},Bt=(t,e)=>{($.$config$.logGetters||$.$config$.logSetters)&&I(`Dimension cache cleared from style.${e} setter`,t[w])},Pt=(t,e)=>{($.$config$.logGetters||$.$config$.logCalls)&&I(`Dimension cache cleared from method call ${e}()`,t[w])},K=[],St=(t,e,r,n,s,o)=>{if(t[Q]){if(K.push({$winId$:t[w],$instanceId$:t[G],$applyPath$:[...t[Q],...e],$assignInstanceId$:n,$groupedGetters$:s}),K[V(K)-1].$debug$=((l,i,a)=>{let u=yt(l,i);return a===1?u+=" (blocking)":a===2?u+=" (non-blocking)":a===3&&(u+=" (non-blocking, no-side-effect)"),u.trim()})(t,e,r),o&&r!==3&&console.error("buffer must be sent NonBlockingNoSideEffect"),r===3)$.$postMessage$([12,{$msgId$:J(),$tasks$:[...K]}],o?[o instanceof ArrayBuffer?o:o.buffer]:void 0),K.length=0;else if(r===1)return wt(!0);$.$asyncMsgTimer$=setTimeout(wt,20)}},wt=t=>{if(clearTimeout($.$asyncMsgTimer$),V(K)){$.$config$.logMainAccess&&I(`Main access, tasks sent: ${K.length}`);const e=K[V(K)-1],r={$msgId$:J(),$tasks$:[...K]};if(K.length=0,t){const n=((l,i)=>{const a=l.$sharedDataBuffer$,u=new Int32Array(a);Atomics.store(u,0,0),l.$postMessage$([11,i]),Atomics.wait(u,0,0);let h=Atomics.load(u,0),g="",S=0;for(;S<h;S++)g+=String.fromCharCode(u[S+1]);return JSON.parse(g)})($,r),s=n.$isPromise$,o=it(e.$winId$,e.$instanceId$,e.$applyPath$,n.$rtnValue$);if(n.$error$){if(s)return Promise.reject(n.$error$);throw new Error(n.$error$)}return s?Promise.resolve(o):o}$.$postMessage$([12,r])}},D=(t,e,r,n)=>($.$config$.get&&(n=$.$config$.get(Ft(t,e)),n!==gt)||(n=St(t,e,1,void 0,r),((s,o,l,i=!1,a=!1)=>{if($.$config$.logGetters)try{const u=`Get ${yt(s,o)}, returned: ${N(o,l)}${i?" (restricted to worker)":""}${a?" (grouped getter)":""}`;u.includes("Symbol(")||I(u,s[w])}catch{}})(t,e,n,!1,!!r)),n),b=(t,e,r,n)=>{if($.$config$.set){if(n=$.$config$.set({value:r,prevent:qt,...Ft(t,e)}),n===qt)return;n!==gt&&(r=n)}Ee.some(s=>e.includes(s))&&(j.clear(),((s,o)=>{($.$config$.logGetters||$.$config$.logSetters)&&I(`Dimension cache cleared from setter "${o}"`,s[w])})(t,e[e.length-1])),e=[...e,Wt(t,r),0],((s,o,l,i=!1)=>{if($.$config$.logSetters)try{o=o.slice(0,o.length-2),I(`Set ${yt(s,o)}, value: ${N(o,l)}${i?" (restricted to worker)":""}`,s[w])}catch{}})(t,e,r),St(t,e,2)},y=(t,e,r,n,s,o,l,i)=>($.$config$.apply&&(l=$.$config$.apply({args:r,...Ft(t,e)}),l!==gt)||(i=e[V(e)-1],e=[...e,Wt(t,r)],n=n||(Te.includes(i)?2:1),i==="setAttribute"&&At(t,r[0])?v(t,r[0],r[1]):Me.includes(i)?(j.clear(),Lt.clear(),((a,u)=>{($.$config$.logGetters||$.$config$.logCalls)&&I(`Dimension and DOM structure cache cleared from method call ${u}()`,a[w])})(t,i)):Vt.includes(i)&&(n=2,j.clear(),Pt(t,i)),l=St(t,e,n,s,void 0,o),((a,u,h,g)=>{if($.$config$.logCalls)try{u=u.slice(0,u.length-1),I(`Call ${yt(a,u)}(${h.map(S=>N(u,S)).join(", ")}), returned: ${N(u,g)}`,a[w])}catch{}})(t,e,r,l)),l),ie=(t,e,r)=>{((n,s,o)=>{if($.$config$.logCalls)try{I(`Construct new ${s}(${o.map(l=>N([],l)).join(", ")})`,n[w])}catch{}})(t,e,r),St(t,[1,e,Wt(t,r)],1)},Ft=(t,e)=>({name:e.join("."),continue:gt,nodeName:t[C],constructor:lt(t),instance:t,window:p[t[w]].$window$}),ce=(t,e,r,n,s)=>{let o=h=>(h=r.get(t.origin),h||r.set(t.origin,h=[]),h),l=h=>o().findIndex(g=>g[le]===h),i,a,u={getItem(h){return i=l(h),i>-1?o()[i][ae]:null},setItem(h,g){i=l(h),i>-1?o()[i][ae]=g:o().push([h,g]),n?y(t,[e,"setItem"],[h,g],2):at("set",e,s)},removeItem(h){i=l(h),i>-1&&o().splice(i,1),n?y(t,[e,"removeItem"],[h],2):at("remove",e,s)},key(h){return a=o()[h],a?a[le]:null},clear(){o().length=0,n?y(t,[e,"clear"],vt,2):at("clear",e,s)},get length(){return o().length}};t[e]=new Proxy(u,{get:(h,g)=>Reflect.has(h,g)?Reflect.get(h,g):h.getItem(g),set(h,g,S){return h.setItem(g,S),!0},has:(h,g)=>!!Reflect.has(h,g)||typeof g=="string"&&h.getItem(g)!==null,deleteProperty(h,g){return h.removeItem(g),!0}})},le=0,ae=1,Ae=(t,e,r)=>{t[r]=X(class extends e{constructor(n,s,o,l){return super(n,s,o,l||{}),new Proxy(this,{get(i,a){return i[a]?i[a]:(i[a]||typeof a!="string"||i[C][a]||(i[C][a]=D(i,[a])),i[C][a])},set(i,a,u){return i[C][a]=u,b(i,[a],u),Bt(i,a),j.clear(),!0}})}setProperty(...n){this[C][n[0]]=n[1],y(this,["setProperty"],n,2),Bt(this,n[0]),j.clear()}getPropertyValue(n){return this[n]}removeProperty(n){let s=this[C][n];return y(this,["removeProperty"],[n],2),Bt(this,n),j.clear(),this[C][n]=void 0,s}},r)},_e=(t,e)=>{t[e]=X(class{constructor(n){this.ownerNode=n}get cssRules(){const n=this.ownerNode;return new Proxy({},{get(s,o){const l=String(o);return l==="item"?i=>ue(n,i):l==="length"?Mt(n).length:isNaN(l)?s[o]:ue(n,l)}})}insertRule(n,s){const o=Mt(this.ownerNode);return s=s===void 0?0:s,s>=0&&s<=o.length&&(y(this.ownerNode,["sheet","insertRule"],[n,s],2),o.splice(s,0,0)),Pt(this.ownerNode,"insertRule"),j.clear(),s}deleteRule(n){y(this.ownerNode,["sheet","deleteRule"],[n],2),Mt(this.ownerNode).splice(n,1),Pt(this.ownerNode,"deleteRule"),j.clear()}get type(){return"text/css"}},e);const r={sheet:{get(){return new t[e](this)}}};U(t.HTMLStyleElement,r)},Mt=(t,e)=>(e=x(t,2),e||(e=D(t,["sheet","cssRules"]),v(t,2,e)),e),ue=(t,e,r)=>(r=Mt(t),r[e]===0&&(r[e]=D(t,["sheet","cssRules",parseInt(e,10)])),r[e]),Gt=(t,e,r,n,s)=>{try{$.$config$.logScriptExecution&&I(`Execute script: ${r.substring(0,100).split(`
`).map(o=>o.trim()).join(" ").trim().substring(0,60)}...`,n),t.$currentScriptId$=e,$e(t,r)}catch(o){console.error(r,o),s=String(o.stack||o)}return t.$currentScriptId$="",s},$e=(t,e,r)=>{t.$runWindowLoadEvent$=1,e=`with(this){${e.replace(/\bthis\b/g,(n,s,o)=>s>0&&o[s-1]!=="$"?"(thi$(this)?window:this)":n).replace(/\/\/# so/g,"//Xso")}
;function thi$(t){return t===this}};${($.$config$.globalFns||[]).filter(n=>/[a-zA-Z_$][0-9a-zA-Z_$]*/.test(n)).map(n=>`(typeof ${n}=='function'&&(this.${n}=${n}))`).join(";")};`+(r?`
//# sourceURL=`+r:""),t.$isSameOrigin$||(e=e.replace(/.postMessage\(/g,`.postMessage('${t.$winId$}',`)),new Function(e).call(t.$window$),t.$runWindowLoadEvent$=0},jt=(t,e,r)=>{r=x(t,e),r&&setTimeout(()=>r.map(n=>n({type:e})))},$t=(t,e,r,n,s,o)=>{for(n=t.$location$;!n.host&&(t=p[t.$parentWinId$],n=t.$location$,t.$winId$!==t.$parentWinId$););return s=new URL(e||"",n),r&&$.$config$.resolveUrl&&(o=$.$config$.resolveUrl(s,n,r),o)?o:s},Z=(t,e,r)=>$t(t,e,r)+"",de=()=>`<script src="${Zt("partytown.js?v=0.7.6")}"><\/script>`,He=t=>class{constructor(){this.s="",this.l=[],this.e=[],this.style={}}get src(){return this.s}set src(r){$.$config$.logImageRequests&&I(`Image() request: ${Z(t,r,"image")}`,t.$winId$),this.s=r,fetch(Z(t,r,"image"),{mode:"no-cors",credentials:"include",keepalive:!0}).then(n=>{n.ok||n.status===0?this.l.map(s=>s({type:"load"})):this.e.map(s=>s({type:"error"}))},()=>this.e.forEach(n=>n({type:"error"})))}addEventListener(r,n){r==="load"&&this.l.push(n),r==="error"&&this.e.push(n)}get onload(){return this.l[0]}set onload(r){this.l=[r]}get onerror(){return this.e[0]}set onerror(r){this.e=[r]}},he={addEventListener:{value(...t){const e=t[0],r=x(this,e)||[];r.push(t[1]),v(this,e,r)}},async:{get:rt,set:rt},defer:{get:rt,set:rt},onload:{get(){let t=x(this,"load");return t&&t[0]||null},set(t){v(this,"load",t?[t]:null)}},onerror:{get(){let t=x(this,"error");return t&&t[0]||null},set(t){v(this,"error",t?[t]:null)}},getAttribute:{value(t){return t==="src"?this.src:y(this,["getAttribute"],[t])}},setAttribute:{value(t,e){Oe.includes(t)?this[t]=e:y(this,["setAttribute"],[t,e])}}},Oe=_("src,type"),We=(t,e)=>{const r={innerHTML:Ut,innerText:Ut,src:{get(){return x(this,4)||""},set(n){const s=Z(e,n,null),o=$.$config$;n=Z(e,n,"script"),v(this,4,n),b(this,["src"],n),s!==n&&b(this,["dataset","ptsrc"],s),this.type&&o.loadScriptsOnMainThread&&o.loadScriptsOnMainThread.some(i=>i===n)&&b(this,["type"],"text/javascript")}},textContent:Ut,type:{get(){return D(this,["type"])},set(n){Et(n)||(v(this,5,n),b(this,["type"],n))}},...he};U(t,r)},Ut={get(){const t=D(this,["type"]);return Et(t)?x(this,3)||"":D(this,["innerHTML"])},set(t){v(this,3,t)}},Et=t=>!t||t==="text/javascript",ke=(t,e,r)=>{const n=$.$config$,s=X(class extends r{appendChild(o){return this.insertBefore(o,null)}get href(){}set href(o){}insertBefore(o,l){var i,a;const u=o[w]=this[w],h=o[G],g=o[C],S=g==="SCRIPT",W=g==="IFRAME";if(S){const f=x(o,3),R=x(o,5);if(f){if(Et(R)){const B=o.id;if(B&&((a=(i=n.loadScriptsOnMainThread)===null||i===void 0?void 0:i.includes)===null||a===void 0?void 0:a.call(i,B)))b(o,["type"],"text/javascript");else{const P=Gt(e,h,f,u,""),c=P?"pterror":"ptid",m=P||h;b(o,["type"],"text/partytown-x"),b(o,["dataset",c],m)}}b(o,["innerHTML"],f)}}if(y(this,["insertBefore"],[o,l],2),W){const f=x(o,0);if(f&&f.startsWith("javascript:")){const R=f.split("javascript:")[1];Gt(e,h,R,u,"")}((R,B)=>{let ct=0,P,c,m=()=>{p[R]&&p[R].$isInitialized$&&!p[R].$isLoading$?(P=x(B,1)?"error":"load",c=x(B,P),c&&c.map(M=>M({type:P}))):ct++>2e3?(c=x(B,"error"),c&&c.map(M=>M({type:"error"}))):setTimeout(m,9)};m()})(h,o)}return S&&(wt(!0),$.$postMessage$([7,u])),o}get nodeName(){return this[C]==="#s"?"#document-fragment":this[C]}get nodeType(){return 3}get ownerDocument(){return e.$document$}},"Node");Ht(s,_("childNodes,firstChild,isConnected,lastChild,nextSibling,parentElement,parentNode,previousSibling")),t.Node=s},Be=_("AUDIO,CANVAS,VIDEO"),ge=_("Audio,MediaSource"),Pe=(t,e,r)=>{U(t,{body:{get:()=>e.$body$},cookie:{get(){return e.$isSameOrigin$?D(this,["cookie"]):(at("get","cookie",e),"")},set(s){e.$isSameOrigin$?b(this,["cookie"],s):at("set","cookie",e)}},createElement:{value(s){if(s=s.toUpperCase(),!Ce.test(s))throw s+" not valid";const o=s==="IFRAME",l=this[w],i=(o?"f_":"")+J();y(this,["createElement"],[s],2,i);const a=Y(l,i,s);if(o){const u=Ct({$winId$:i,$parentWinId$:l,$url$:"about:blank"},!0);u.$window$.fetch=fetch,b(a,["srcdoc"],de())}else if(s==="SCRIPT"){const u=x(a,5);Et(u)&&b(a,["type"],"text/partytown")}return a}},createElementNS:{value(s,o){const l=J(),i=Y(this[w],l,o,s);return y(this,["createElementNS"],[s,o],2,l),i}},createTextNode:{value(s){const o=this[w],l=J(),i=Y(o,l,"#text");return y(this,["createTextNode"],[s],2,l),i}},createEvent:{value:s=>new Event(s)},currentScript:{get(){return e.$currentScriptId$?Y(this[w],e.$currentScriptId$,"SCRIPT"):null}},defaultView:{get:()=>r?null:e.$window$},documentElement:{get:()=>e.$documentElement$},getElementsByTagName:{value(s){return s=s.toUpperCase(),s==="BODY"?[e.$body$]:s==="HEAD"?[e.$head$]:y(this,["getElementsByTagName"],[s])}},head:{get:()=>e.$head$},images:{get(){return D(this,["images"])}},implementation:{get(){return{hasFeature:()=>!0,createHTMLDocument:s=>{const o=J();return y(this,["implementation","createHTMLDocument"],[s],1,{$winId$:o}),Ct({$winId$:o,$parentWinId$:o,$url$:e.$location$+"",$visibilityState$:"hidden"},!0,!0).$document$}}}},location:{get:()=>e.$location$,set(s){e.$location$.href=s+""}},nodeType:{value:9},parentNode:{value:null},parentElement:{value:null},readyState:{value:"complete"},visibilityState:{get:()=>e.$visibilityState$||"visible"}}),mt(t,"compatMode,referrer,forms")},fe=(t,e)=>{U(t,{parentElement:{get(){return this.parentNode}},parentNode:{get:()=>e.$documentElement$}})},Fe=(t,e)=>{U(t,{localName:{get(){return this[C].toLowerCase()}},namespaceURI:{get(){return this[Kt]||"http://www.w3.org/1999/xhtml"}},nodeType:{value:1},tagName:{get(){return this[C]}}}),Ht(t,zt),mt(t,"id"),te(e),ee(e,_("getClientRects,getBoundingClientRect"))},Ge=(t,e)=>{const r={};_("hash,host,hostname,href,origin,pathname,port,protocol,search").map(n=>{r[n]={get(){let s=x(this,4),o;return typeof s!="string"&&(o=D(this,["href"]),v(this,4,o),s=new URL(o)[n]),$t(e,s,null)[n]},set(s){let o;if(n==="href")if((l=>{try{return new URL(l),!0}catch{return!1}})(s))o=new URL(s);else{const l=e.$location$.href;o=$t(e,l,null),o.href=new URL(s+"",o.href)}else o=$t(e,this.href,null),o[n]=s;v(this,4,o.href),b(this,["href"],o.href)}}}),U(t,r)},je=(t,e)=>{const r={contentDocument:{get(){return Tt(this).$document$}},contentWindow:{get(){return Tt(this).$window$}},src:{get(){let n=x(this,0);return n&&n.startsWith("javascript:")?n:(n=Tt(this).$location$.href,n.startsWith("about:")?"":n)},set(n){if(n){if(n.startsWith("javascript:"))v(this,0,n);else if(!n.startsWith("about:")){let s=new XMLHttpRequest,o,l=Tt(this);l.$location$.href=n=Z(l,n,"iframe"),l.$isLoading$=1,v(this,1,void 0),s.open("GET",n,!1),s.send(),o=s.status,o>199&&o<300?(b(this,["srcdoc"],`<base href="${n}">`+function(i){return i.replace(Ue,(a,u)=>{const h=[];let g=!1,S;for(;S=Ke.exec(u);){let[W]=S;W.startsWith("type=")&&(g=!0,W=W.replace(/(application|text)\/javascript/,Ie)),h.push(W)}return g||h.push('type="text/partytown"'),`<script ${h.join(" ")}>`})}(s.responseText)+de()),wt(!0),$.$postMessage$([7,l.$winId$])):(v(this,1,o),l.$isLoading$=0)}}}},...he};U(t,r)},pe=`((?:\\w|-)+(?:=(?:(?:\\w|-)+|'[^']*'|"[^"]*")?)?)`,Ue=new RegExp(`<script\\s*((${pe}\\s*)*)>`,"mg"),Ke=new RegExp(pe,"mg"),Tt=t=>{const e=t[G];return p[e]||Ct({$winId$:e,$parentWinId$:t[w],$url$:D(t,["src"])||"about:blank"},!0),p[e]},qe=t=>{const e=(n,s)=>{const{a:o,b:l,c:i,d:a,e:u,f:h}=y(n,[s],vt);return new DOMMatrixReadOnly([o,l,i,a,u,h])},r={...t,getCTM:{value:function(){return e(this,"getCTM")}},getScreenCTM:{value:function(){return e(this,"getScreenCTM")}}};U(t,r)},Xe=(t,e)=>{t.NamedNodeMap=X(class extends e{constructor(n,s,o){return super(n,s,o),new Proxy(this,{get(l,i){const a=me[i];return a?a.bind(l,[i]):D(l,[i])},set(l,i,a){if(me[i])throw new Error("Can't set read-only property: "+String(i));return b(l,[i],a),!0}})}},"NamedNodeMap")};function tt(t,...e){return y(this,t,e,1)}const me={getNamedItem:tt,getNamedItemNS:tt,item:tt,removeNamedItem:tt,removeNamedItemNS:tt,setNamedItem:tt,setNamedItemNS:tt},Je=(t,e,r,n,s,o)=>{let l,i,a;const u=class{constructor(c,m,M,k,F){this[w]=c||t,this[G]=m||l||J(),this[Q]=M||[],this[C]=k||i,this[Kt]=F||a,this[ht]={},l=i=a=void 0}},h=X(class extends URL{assign(){I("location.assign(), noop")}reload(){I("location.reload(), noop")}replace(){I("location.replace(), noop")}},"Location"),g=new h(r),S=g.origin===$.$origin$||g.origin==="about:blank",W=e===t,f={},R=()=>{let c=[],m,M;for(m in p)M=p[m],M.$parentWinId$!==t||M.$isTopWindow$||c.push(M);return c},B=X(class extends u{constructor(){super(t,t);let c=this,m,M,k=0,F=()=>{k||(($.$initWindowMedia$||(A.$bridgeToMedia$=[D,b,y,ie,U,J,w,G,Q],$.$importScripts$(Zt("partytown-media.js?v=0.7.6")),$.$initWindowMedia$=A.$bridgeFromMedia$,delete A.$bridgeFromMedia$),$.$initWindowMedia$)(u,P,f,c,ge),k=1)},H={},et=(d,E,L)=>{Be.includes(d)&&F();const T=H[d]?H[d]:d.includes("-")?H.UNKNOWN:H.I;return l=E,i=d,a=L,new T};if(c.Window=B,c.name=name+`${ut(t)} (${t})`,ke(c,f,u),(d=>{d.NodeList=X(re,"NodeList")})(c),Xe(c,u),Ae(c,u,"CSSStyleDeclaration"),((d,E,L)=>{d[L]=X(class extends E{now(){return performance.now()}},L)})(c,u,"Performance"),((d,E)=>{const L=new Map;d.customElements={define(T,q,It){L.set(T,q),E[T.toUpperCase()]=q;const z=[q.name,q.observedAttributes];y(d,["customElements","define"],[T,z,It])},get:T=>L.get(T)||y(d,["customElements","get"],[T]),whenDefined:T=>L.has(T)?Promise.resolve():y(d,["customElements","whenDefined"],[T]),upgrade:T=>y(d,["customElements","upgrade"],[T])}})(c,H),$.$interfaces$.map(([d,E,L,T,q])=>{const It=Ye[d]?ct:E==="EventTarget"?P:E==="Object"?u:c[E],z=c[d]=X(T===12?class extends u{constructor(...O){super(),ie(this,d,O)}}:c[d]||class extends It{},d);q&&(H[q]=z),L.map(([O,xt,Se])=>{O in z.prototype||O in It.prototype||(typeof xt=="string"?ot(z,O,{get(){if(!At(this,O)){const nt=this[G],Ze=[...this[Q],O],we=c[xt];we&&v(this,O,new we(t,nt,Ze))}return x(this,O)},set(nt){v(this,O,nt)}}):xt===5?Rt(z,O,function(...nt){return y(this,[O],nt)}):xt>0&&(Se!==void 0?Rt(z,O,Se):ot(z,O,{get(){return D(this,[O])},set(nt){return b(this,[O],nt)}})))})}),_("atob,btoa,crypto,indexedDB,setTimeout,setInterval,clearTimeout,clearInterval").map(d=>{delete B.prototype[d],d in c||(m=A[d],m!=null&&(c[d]=typeof m!="function"||m.toString().startsWith("class")?m:m.bind(A)))}),Object.getOwnPropertyNames(A).map(d=>{d in c||(c[d]=A[d])}),ge.map(d=>Dt(c,d,{get(){return F(),c[d]}})),"trustedTypes"in A&&(c.trustedTypes=A.trustedTypes),Fe(c.Element,c.HTMLElement),Pe(c.Document,f,o),(d=>{_t(d,11),Ht(d,zt)})(c.DocumentFragment),Ge(c.HTMLAnchorElement,f),(d=>{U(d,{}),mt(d,"elements")})(c.HTMLFormElement),je(c.HTMLIFrameElement),We(c.HTMLScriptElement,f),qe(c.SVGGraphicsElement),fe(c.HTMLHeadElement,f),fe(c.HTMLBodyElement,f),((d,E)=>{U(d,{parentElement:{value:null},parentNode:{get:()=>E.$document$}})})(c.HTMLHtmlElement,f),_e(c,"CSSStyleSheet"),_t(c.Comment,8),_t(c.DocumentType,10),Object.assign(f,{$winId$:t,$parentWinId$:e,$window$:new Proxy(c,{get:(d,E)=>{var L;if(typeof E!="string"||isNaN(E))return!((L=$.$config$.mainWindowAccessors)===null||L===void 0)&&L.includes(E)?D(this,[E]):d[E];{let T=R()[E];return T?T.$window$:void 0}},has:()=>!0}),$document$:et("#document",t+".d"),$documentElement$:et("HTML",t+".e"),$head$:et("HEAD",t+".h"),$body$:et("BODY",t+".b"),$location$:g,$visibilityState$:n,$isSameOrigin$:S,$isTopWindow$:W,$createNode$:et}),c.requestAnimationFrame=d=>setTimeout(()=>d(performance.now()),9),c.cancelAnimationFrame=d=>clearTimeout(d),c.requestIdleCallback=(d,E)=>(E=Date.now(),setTimeout(()=>d({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-E))}),1)),c.cancelIdleCallback=d=>clearTimeout(d),ce(c,"localStorage",Jt,S,f),ce(c,"sessionStorage",Yt,S,f),S||(c.indexeddb=void 0),s)M={},c.history={pushState(d){M=d},replaceState(d){M=d},get state(){return M},length:0},c.indexeddb=void 0;else{const d=c.history.pushState.bind(c.history),E=c.history.replaceState.bind(c.history);c.history.pushState=(L,T,q)=>{f.$propagateHistoryChange$!==!1&&d(L,T,q)},c.history.replaceState=(L,T,q)=>{f.$propagateHistoryChange$!==!1&&E(L,T,q)}}c.Worker=void 0}addEventListener(...c){c[0]==="load"?f.$runWindowLoadEvent$&&setTimeout(()=>c[1]({type:"load"})):y(this,["addEventListener"],c,2)}get body(){return f.$body$}get document(){return f.$document$}get documentElement(){return f.$documentElement$}fetch(c,m){return c=typeof c=="string"||c instanceof URL?String(c):c.url,fetch(Z(f,c,"fetch"),m)}get frames(){return f.$window$}get frameElement(){return W?null:Y(e,t,"IFRAME")}get globalThis(){return f.$window$}get head(){return f.$head$}get length(){return R().length}get location(){return g}set location(c){g.href=c+""}get Image(){return He(f)}get navigator(){return(c=>{let m,M={sendBeacon:(k,F)=>{if($.$config$.logSendBeaconRequests)try{I(`sendBeacon: ${Z(c,k,null)}${F?", data: "+JSON.stringify(F):""}`)}catch(H){console.error(H)}try{return fetch(Z(c,k,null),{method:"POST",body:F,mode:"no-cors",keepalive:!0}),!0}catch(H){return console.error(H),!1}}};for(m in navigator)M[m]=navigator[m];return new Proxy(M,{set(k,F,H){return navigator[F]=H,!0}})})(f)}get origin(){return g.origin}set origin(c){}get parent(){for(let c in p)if(p[c].$winId$===e)return p[c].$window$;return f.$window$}postMessage(...c){p[c[0]]&&(V(ft)>50&&ft.splice(0,5),ft.push({$winId$:c[0],$data$:JSON.stringify(c[1])}),c=c.slice(1)),y(this,["postMessage"],c,3)}get self(){return f.$window$}get top(){for(let c in p)if(p[c].$isTopWindow$)return p[c].$window$;return f.$window$}get window(){return f.$window$}get XMLHttpRequest(){const c=XMLHttpRequest,m=String(c),M=X(class extends c{open(...k){k[1]=Z(f,k[1],"xhr"),super.open(...k)}set withCredentials(k){}toString(){return m}},lt(c));return M.prototype.constructor.toString=()=>m,M}},"Window"),ct=class extends u{constructor(c,m,M,k){return super(c,m,M,k),new Proxy(this,{get:(F,H)=>D(F,[H]),set(F,H,et){return b(F,[H],et),!0}})}},P=class extends u{};return Nt.map(c=>P.prototype[c]=function(...m){return y(this,[c],m,2)}),mt(B,"devicePixelRatio"),te(B),ee(B,["getComputedStyle"]),new B,f},Ye={DOMStringMap:1,NamedNodeMap:1},Ct=({$winId$:t,$parentWinId$:e,$url$:r,$visibilityState$:n},s,o)=>(p[t]||(p[t]=Je(t,e,r,n,s,o),I(`Created ${t===e?"top":"iframe"} window ${ut(t)} environment`,t)),$.$postMessage$([7,t]),p[t]),dt=[],ye=t=>{const e=t.data,r=e[0],n=e[1];if($.$isInitialized$)if(r===7)(async s=>{let o=s.$winId$,l=s.$instanceId$,i=Y(o,l,"SCRIPT"),a=s.$content$,u=s.$url$,h=s.$orgUrl$,g="",S=p[o],W,f=["text/jscript","text/javascript","text/x-javascript","application/javascript","application/x-javascript","text/ecmascript","text/x-ecmascript","application/ecmascript"];if(u)try{if(u=$t(S,u,"script")+"",v(i,4,u),$.$config$.logScriptExecution&&I(`Execute script src: ${h}`,o),W=await fetch(u),W.ok){let R=W.headers.get("content-type");f.some(ct=>{var P,c,m;return(m=(P=R?.toLowerCase)===null||P===void 0?void 0:(c=P.call(R)).includes)===null||m===void 0?void 0:m.call(c,ct)})&&(a=await W.text(),S.$currentScriptId$=l,$e(S,a,h||u)),jt(i,"load")}else g=W.statusText,jt(i,"error")}catch(R){console.error(R),g=String(R.stack||R),jt(i,"error")}else a&&(g=Gt(S,l,a,o,g));S.$currentScriptId$="",$.$postMessage$([6,o,l,g])})(n);else if(r===9)(({$winId$:s,$instanceId$:o,$refId$:l,$thisArg$:i,$args$:a})=>{if(st[l])try{st[l].apply(it(s,o,[],i),it(s,o,[],a))}catch(u){console.error(u)}})(n);else if(r===10)(({$winId$:s,$forward$:o,$args$:l})=>{try{let i=p[s].$window$,a=0,u=V(o);for(;a<u;a++)a+1<u?i=i[o[a]]:i[o[a]].apply(i,it(null,s,[],l))}catch(i){console.error(i)}})(n);else if(r===5)Ct(n);else if(r===8){if(p[n].$isInitialized$!==1){const s=n,o=p[s],l=o.$winId$===o.$parentWinId$?"top":"iframe";I(`Initialized ${l} window ${ut(s)} environment \u{1F389}`,s)}p[n].$isInitialized$=1,p[n].$isLoading$=0}else if(r===14)p[n].$visibilityState$=e[2];else if(r===13){const s=n.$winId$,o=p[s];o.$location$.href=n.url,function(l,i,a){const u=i.$window$.history;switch(a.type){case 0:i.$propagateHistoryChange$=!1;try{u.pushState(a.state,"",a.newUrl)}catch{}i.$propagateHistoryChange$=!0;break;case 1:i.$propagateHistoryChange$=!1;try{u.replaceState(a.state,"",a.newUrl)}catch{}i.$propagateHistoryChange$=!0}}(n.$winId$,o,n)}else r===15&&((s,o,l,i,a)=>{const u=Y(o,l);u&&typeof u[i]=="function"&&u[i].apply(u,a)})(...e);else r===1?((s=>{const o=$.$config$=JSON.parse(s.$config$),l=s.$origin$;$.$importScripts$=importScripts.bind(A),$.$interfaces$=s.$interfaces$,$.$libPath$=s.$libPath$,$.$origin$=l,$.$postMessage$=postMessage.bind(A),$.$sharedDataBuffer$=s.$sharedDataBuffer$,Jt.set(l,s.$localStorage$),Yt.set(l,s.$sessionStorage$),A.importScripts=void 0,delete A.postMessage,delete A.WorkerGlobalScope,_("resolveUrl,get,set,apply").map(i=>{o[i]&&(o[i]=new Function("return "+o[i])())})})(n),$.$postMessage$([2])):r===3?($.$interfaces$=[...$.$interfaces$,...n],$.$isInitialized$=1,I("Initialized web worker"),$.$postMessage$([4]),dt.length&&I(`Queued ready messages: ${dt.length}`),[...dt].map(ye),dt.length=0):dt.push(t)};A.onmessage=ye,postMessage([0])})(self);
