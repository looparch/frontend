(D=>{const at=n=>typeof n=="object"&&n&&n.then,lt=()=>{},b=n=>n.length,w=n=>{var t,e,o;try{const s=(t=n?.constructor)===null||t===void 0?void 0:t.name;if(s)return s}catch{}try{const s=(o=(e=n?.__zone_symbol__originalInstance)===null||e===void 0?void 0:e.constructor)===null||o===void 0?void 0:o.name;if(s)return s}catch{}return""},O=(n,t)=>n.startsWith(t),J=n=>!(O(n,"webkit")||O(n,"toJSON")||O(n,"constructor")||O(n,"toString")||O(n,"_")),B=n=>n.nodeType===11&&n.host?"#s":n.nodeName,K=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER).toString(36),pt=(n,t)=>((e,o,s)=>Object.defineProperty(e,o,{...s,configurable:!0}))(n,"name",{value:t}),ft={Anchor:"a",DList:"dl",Image:"img",OList:"ol",Paragraph:"p",Quote:"q",TableCaption:"caption",TableCell:"td",TableCol:"colgroup",TableRow:"tr",TableSection:"tbody",UList:"ul"},dt={Graphics:"g",SVG:"svg"},Q=Symbol(),X=Symbol(),R=new Map,Y=new Map,y={},T=new WeakMap,F=(n,t)=>{if(n)return(t=T.get(n))||(t=n[Q])||P(n,t=K()),t},Z=(n,t,e,o,s)=>{if((e=y[n])&&e.$window$){if(n===t)return e.$window$;if(o=e.$window$.document,s=t.split(".").pop(),s==="d")return o;if(s==="e")return o.documentElement;if(s==="h")return o.head;if(s==="b")return o.body}return R.get(t)},P=(n,t,e)=>{n&&(R.set(t,n),n[Q]=t,n[X]=e=Date.now(),e>x+5e3&&(R.forEach((o,s)=>{o[X]<x&&o.nodeType&&!o.isConnected&&R.delete(s)}),x=e))};let x=0;const u=D.parent,S=document.implementation.createHTMLDocument(),V=u.partytown||{},z=(V.lib||"/~partytown/")+"debug/",U=n=>{console.debug.apply(console,["%cMain \u{1F30E}","background: #717171; color: white; padding: 2px 3px; border-radius: 2px; font-size: 0.8em;",n])},q=[],G=n=>(q.includes(n)||q.push(n),q.indexOf(n)+1),ut=(n,t,e)=>{const o=pt(class extends y[n].$window$.HTMLElement{},e[0]);return"connectedCallback,disconnectedCallback,attributeChangedCallback,adoptedCallback".split(",").map(r=>o.prototype[r]=function(...i){t.postMessage([15,n,F(this),r,i])}),o.observedAttributes=e[1],o},I=(n,t,e,o,s)=>t!==void 0&&(o=typeof t)?o==="string"||o==="number"||o==="boolean"||t==null?[0,t]:o==="function"?[6]:(e=e||new Set)&&Array.isArray(t)?e.has(t)?[1,[]]:e.add(t)&&[1,t.map(r=>I(n,r,e))]:o==="object"?$t(t)?[14,{name:t.name,message:t.message,stack:t.stack}]:(s=w(t))===""?[2,{}]:s==="Window"?[3,[n,n]]:s==="HTMLCollection"||s==="NodeList"?[7,Array.from(t).map(r=>I(n,r,e)[1])]:s.endsWith("Event")?[5,j(n,t,e)]:s==="CSSRuleList"?[12,Array.from(t).map(N)]:O(s,"CSS")&&s.endsWith("Rule")?[11,N(t)]:s==="CSSStyleDeclaration"?[13,j(n,t,e)]:s==="Attr"?[10,[t.name,t.value]]:t.nodeType?[3,[n,F(t),B(t)]]:[2,j(n,t,e,!0,!0)]:void 0:t,j=(n,t,e,o,s,r,i,c)=>{if(r={},!e.has(t)){e.add(t);for(i in t)J(i)&&(c=i==="path"&&w(t).endsWith("Event")?t.composedPath():t[i],(o||typeof c!="function")&&(s||c!=="")&&(r[i]=I(n,c,e)))}return r},N=n=>{let t={},e;for(e in n)yt.includes(e)&&(t[e]=String(n[e]));return t},$t=n=>n instanceof D.top.Error,A=(n,t,e,o)=>{if(t)return e=t[0],o=t[1],e===0?o:e===4?gt(n,o):e===1?o.map(s=>A(n,s)):e===3?Z(o[0],o[1]):e===5?ht(tt(n,o)):e===2?tt(n,o):e===8?o:e===9?new D[t[2]](o):void 0},gt=(n,{$winId$:t,$instanceId$:e,$refId$:o},s)=>(s=Y.get(o),s||(s=function(...r){n.postMessage([9,{$winId$:t,$instanceId$:e,$refId$:o,$thisArg$:I(t,this),$args$:I(t,r)}])},Y.set(o,s)),s),ht=n=>new("detail"in n?CustomEvent:Event)(n.type,n),tt=(n,t,e,o)=>{e={};for(o in t)e[o]=A(n,t[o]);return e},yt="cssText,selectorText,href,media,namespaceURI,prefix,name,conditionText".split(","),et=async(n,t)=>{let e={$msgId$:t.$msgId$},o=b(t.$tasks$),s=0,r,i,c,l,p,f;for(;s<o;s++)try{f=s===o-1,r=t.$tasks$[s],i=r.$winId$,c=r.$applyPath$,!y[i]&&i.startsWith("f_")&&await new Promise(d=>{let $=0,a=()=>{y[i]||$++>1e3?d():requestAnimationFrame(a)};a()}),c[0]===1&&c[1]in y[i].$window$?P(new y[i].$window$[c[1]](...A(n,c[2])),r.$instanceId$):(l=Z(i,r.$instanceId$),l?(p=St(n,i,l,c,f,r.$groupedGetters$),r.$assignInstanceId$&&(typeof r.$assignInstanceId$=="string"?P(p,r.$assignInstanceId$):y[r.$assignInstanceId$.$winId$]={$winId$:r.$assignInstanceId$.$winId$,$window$:{document:p}}),at(p)&&(p=await p,f&&(e.$isPromise$=!0)),f&&(e.$rtnValue$=I(i,p))):(e.$error$=`Error finding instance "${r.$instanceId$}" on window ${G(i)}`,console.error(e.$error$,r)))}catch(d){f?e.$error$=String(d.stack||d):console.error(d)}return e},St=(n,t,e,o,s,r)=>{let i=0,c=b(o),l,p,f,d,$;for(;i<c;i++){p=o[i],l=o[i+1],f=o[i-1];try{if(!Array.isArray(l))if(typeof p=="string"||typeof p=="number"){if(i+1===c&&r)return $={},r.map(a=>$[a]=e[a]),$;e=e[p]}else{if(l===0){e[f]=A(n,p);return}if(typeof e[f]=="function"&&(d=A(n,p),f==="define"&&w(e)==="CustomElementRegistry"&&(d[1]=ut(t,n,d[1])),f==="insertRule"&&d[1]>b(e.cssRules)&&(d[1]=b(e.cssRules)),e=e[f].apply(e,d),f==="play"))return Promise.resolve()}}catch(a){if(s)throw a;console.debug("Non-blocking setter error:",a)}}return e},k=(n,t)=>{let e=t.$winId$,o=t.$window$,s=o.document,r='script[type="text/partytown"]:not([data-ptid]):not([data-pterror])',i,c,l;if(s&&s.body)if(i=s.querySelector('script[type="text/partytown"]:not([data-ptid]):not([data-pterror]):not([async]):not([defer])'),i||(i=s.querySelector(r)),i)i.dataset.ptid=c=F(i,e),l={$winId$:e,$instanceId$:c},i.src?(l.$url$=i.src,l.$orgUrl$=i.dataset.ptsrc||i.src):l.$content$=i.innerHTML,n.postMessage([7,l]);else{if(!t.$isInitialized$){t.$isInitialized$=1,((p,f,d)=>{let $=d._ptf,a=(d.partytown||{}).forward||[],h,g,m=(M,_)=>p.postMessage([10,{$winId$:f,$forward$:M,$args$:I(f,Array.from(_))}]);if(d._ptf=void 0,a.map(M=>{g=d,M.split(".").map((_,W,L)=>{g=g[L[W]]=W+1<b(L)?g[L[W]]||(L[W+1]==="push"?[]:{}):(...v)=>m(L,v)})}),$)for(h=0;h<b($);h+=2)m($[h],$[h+1])})(n,e,o),s.dispatchEvent(new CustomEvent("pt0"));{const p=o===o.top?"top":"iframe";U(`Executed ${p} window ${G(e)} environment scripts in ${(performance.now()-t.$startTime$).toFixed(1)}ms`)}}n.postMessage([8,e])}else requestAnimationFrame(()=>k(n,t))},nt=(n,t,e)=>{if(!T.has(e)){T.set(e,t);const o=e.document,s=e.history,r=T.get(e.parent);let i=!1;const c=[],l=a=>{i?a():c.push(a)},p=()=>{n.postMessage([5,{$winId$:t,$parentWinId$:r,$url$:o.baseURI,$visibilityState$:o.visibilityState}]),setTimeout(()=>{i=!0,c.forEach(a=>{a()})})},f=s.pushState.bind(s),d=s.replaceState.bind(s),$=(a,h,g,m)=>()=>{setTimeout(()=>{n.postMessage([13,{$winId$:t,type:a,state:h,url:o.baseURI,newUrl:g,oldUrl:m}])})};s.pushState=(a,h,g)=>{f(a,h,g),l($(0,a,g?.toString()))},s.replaceState=(a,h,g)=>{d(a,h,g),l($(1,a,g?.toString()))},e.addEventListener("popstate",a=>{l($(2,a.state))}),e.addEventListener("hashchange",a=>{l($(3,{},a.newURL,a.oldURL))}),e.addEventListener("ptupdate",()=>{k(n,y[t])}),o.addEventListener("visibilitychange",()=>n.postMessage([14,t,o.visibilityState])),y[t]={$winId$:t,$window$:e},y[t].$startTime$=performance.now(),U(`Registered ${t===r?"top":"iframe"} window ${G(t)}`),o.readyState==="complete"?p():e.addEventListener("load",p)}},mt=(n,t,e)=>{t[0]===4?nt(n,K(),u):(e=y[t[1]],e&&(t[0]===7?requestAnimationFrame(()=>k(n,e)):t[0]===6&&((o,s,r,i,c)=>{c=s.$window$.document.querySelector(`[data-ptid="${r}"]`),c&&(i?c.dataset.pterror=i:c.type+="-x",delete c.dataset.ptid),k(o,s)})(n,e,t[2],t[3])))},bt=()=>{const n=Object.getOwnPropertyNames(u).map(t=>((e,o,s,r)=>{if(s=o.match(/^(HTML|SVG)(.+)Element$/),s)return r=s[2],o[0]=="S"?e.createElementNS("http://www.w3.org/2000/svg",dt[r]||r.slice(0,2).toLowerCase()+r.slice(2)):e.createElement(ft[r]||r)})(S,t)).filter(t=>t).map(t=>[t]);return ot(n,[])},It=new Set(["Object"]),ot=(n,t)=>(n.filter(o=>o[0]).map(o=>{const s=o[0],r=o[1],i=w(s),c=u[i].prototype;return[i,c,s,r]}).map(([o,s,r,i])=>rt(It,t,o,s,r,i)),t),st=(n,t,e)=>{let o=[],s=[n,"Object",o];for(e in t)it(o,t,e);return s},rt=(n,t,e,o,s,r)=>{if(!n.has(e)){n.add(e);const i=Object.getPrototypeOf(o),c=w(i),l=[],p=Object.getOwnPropertyDescriptors(o);rt(n,t,c,i,s,r);for(const f in p)it(l,s,f);t.push([e,c,l,r,B(s)])}},it=(n,t,e,o,s,r)=>{try{J(e)&&isNaN(e[0])&&e!=="all"&&(o=t[e],s=typeof o,s==="function"?(String(o).includes("[native")||Object.getPrototypeOf(t)[e])&&n.push([e,5]):s==="object"&&o!=null?(r=w(o),r!=="Object"&&self[r]&&n.push([e,o.nodeType||r])):s!=="symbol"&&(e.toUpperCase()===e?n.push([e,6,o]):n.push([e,6])))}catch(i){console.warn(i)}},ct=n=>{let t=[],e=0,o=b(u[n]),s;for(;e<o;e++)s=u[n].key(e),t.push([s,u[n].getItem(s)]);return t},H=(n,t)=>n[t]!==void 0?new n[t](lt):0,Ct=(n,t,e)=>{t[e]!==void 0&&n.push([e,"Object",Object.keys(t[e].prototype).map(o=>[o,6]),12])};let C;(async n=>{const t=new SharedArrayBuffer(1073741824),e=new Int32Array(t);return(o,s)=>{const r=s[0],i=s[1];if(r===0){const c=(()=>{const l=S.createElement("i"),p=S.createTextNode(""),f=S.createComment(""),d=S.createDocumentFragment(),$=S.createElement("p").attachShadow({mode:"open"}),a=H(u,"IntersectionObserver"),h=H(u,"MutationObserver"),g=H(u,"ResizeObserver"),m=u.performance,M=u.screen,_=[[u.history],[m],[m.navigation],[m.timing],[M],[M.orientation],[u.visualViewport],[a,12],[h,12],[g,12],[p],[f],[d],[$],[l],[l.attributes],[l.classList],[l.dataset],[l.style],[S],[S.doctype]],W=[st("Window",u),st("Node",p)],v={$config$:JSON.stringify(V,(Et,E)=>(typeof E=="function"&&(E=String(E),E.startsWith(Et+"(")&&(E="function "+E)),E)),$interfaces$:ot(_,W),$libPath$:new URL(z,u.location)+"",$origin$:origin,$localStorage$:ct("localStorage"),$sessionStorage$:ct("sessionStorage")};return Ct(v.$interfaces$,u,"IntersectionObserverEntry"),v})();c.$sharedDataBuffer$=t,o.postMessage([1,c])}else s[0]===2?o.postMessage([3,bt()]):r===11?n(i,c=>{const l=JSON.stringify(c),p=l.length;for(let f=0;f<p;f++)e[f+1]=l.charCodeAt(f);e[0]=p,Atomics.notify(e,0)}):mt(o,s)}})((n,t)=>et(C,n).then(t)).then(n=>{n&&(C=new Worker(z+"partytown-ww-atomics.js?v=0.7.6",{name:"Partytown \u{1F389}"}),C.onmessage=t=>{const e=t.data;e[0]===12?et(C,e[1]):n(C,e)},U("Created Partytown web worker (0.7.6)"),C.onerror=t=>console.error("Web Worker Error",t),u.addEventListener("pt1",t=>nt(C,F(t.detail.frameElement),t.detail)))})})(window);
